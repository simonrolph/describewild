<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="">
    <title>Describe Wild - Homepage</title>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="typeaheadjs.css">
    <!-- font awesome -->
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">
    <!-- lightbox - lity -->
    <link href="lity-2.3.0/dist/lity.css" rel="stylesheet">
    <!-- leaflet css -->
    <link href="leaflet/leaflet.css" rel="stylesheet">
    <link href="Leaflet.markercluster-1.3.0/dist/MarkerCluster.css" rel="stylesheet">
    <link href="Leaflet.markercluster-1.3.0/dist/MarkerCluster.Default.css" rel="stylesheet"> </head>

<body>
    <header> </header>
    <main role="main">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top"><div class="container"> <a class="navbar-brand" href="index.html">Describe Wild</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    
                    <ul class="navbar-nav">
                        <li class="nav-item"> <a class="nav-link active" href="index.html">Explore</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="tutorials.html">Tutorials</a> </li>
                        <li class="nav-item"> <a class="nav-link" href="about.html">About</a> </li>
                    </ul>
                    </div>
                </div>
            </nav>
        <div class="container" id="vid-filtering">
            <!-- Filters -->
            <br>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-4">
                    <div class="input-group">
                        <div class="input-group-prepend"> <span class="input-group-text" id="basic-addon1"><i class="fa fa-search" aria-hidden="true"></i></span> </div>
                        <input type="search" class="form-control search typeahead" id="search" placeholder="Search..."> </div>
                    <br>
                    <div style="height:306px;overflow:auto;">
                        
                        <div class="form-group">
                            <label>Filter by format</label>
                            <div class="btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-light active btn-sm" id="2fil1" media="All">
                                    <input type="radio" name="media" autocomplete="off" checked> All </label>
                                <label class="btn btn-light btn-sm" id="2fil2" media="V">
                                    <input type="radio" name="media" autocomplete="off"><i class="fa fa-video-camera" aria-hidden="true"></i> Videos </label>
                                <label class="btn btn-light btn-sm" id="2fil3" media="P">
                                    <input type="radio" name="media" autocomplete="off"><i class="fa fa-headphones" aria-hidden="true"></i> Podcasts </label>
                                <label class="btn btn-light btn-sm" id="2fil4" media="B">
                                    <input type="radio" name="media" autocomplete="off"><i class="fa fa-font" aria-hidden="true"></i> Articles </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="togglers">Filter by taxonomic groups</label>
                            <div id="togglers" class="btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-light active btn-sm" id="fil1" taxon="All">
                                    <input type="radio" name="taxons" autocomplete="off" checked> All </label>
                                <label class="btn btn-light btn-sm" id="fil2" taxon="Plants">
                                    <input type="radio" name="taxons" autocomplete="off"> Plants </label>
                                <label class="btn btn-light btn-sm" id="fil3" taxon="Birds">
                                    <input type="radio" name="taxons" autocomplete="off"> Birds </label>
                                <label class="btn btn-light btn-sm" id="fil4" taxon="Mammals">
                                    <input type="radio" name="taxons" autocomplete="off"> Mammals </label>
                                <label class="btn btn-light btn-sm" id="fil5" taxon="Fish">
                                    <input type="radio" name="taxons" autocomplete="off"> Fish </label>
                                <label class="btn btn-light btn-sm" id="fil6" taxon="Invertebrates">
                                    <input type="radio" name="taxons" autocomplete="off"> Invertebrates </label>
                                <label class="btn btn-light btn-sm" id="fil7" taxon="Reptiles">
                                    <input type="radio" name="taxons" autocomplete="off"> Reptiles </label>
                                <label class="btn btn-light btn-sm" id="fil8" taxon="Amphibians">
                                    <input type="radio" name="taxons" autocomplete="off"> Amphibians </label>
                                <label class="btn btn-light btn-sm" id="fil9" taxon="Fungi and Lichens">
                                    <input type="radio" name="taxons" autocomplete="off"> Fungi and Lichens </label>
                            </div>
                        </div>
                        <!--
                        <div class="form-group">
                            <label for="togglers">Filter by theme</label>
                            <div id="togglers" class="btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-light active btn-sm" id="fil1" taxon="All">
                                    <input type="radio" name="taxons" autocomplete="off" checked> All </label>
                                <label class="btn btn-light btn-sm" id="fil2" taxon="Plants">
                                    <input type="radio" name="taxons" autocomplete="off"> Documentary </label>
                                <label class="btn btn-light btn-sm" id="fil3" taxon="Birds">
                                    <input type="radio" name="taxons" autocomplete="off"> ID Guide </label>
                                <label class="btn btn-light btn-sm" id="fil4" taxon="Mammals">
                                    <input type="radio" name="taxons" autocomplete="off"> Interview </label>
                                
                            </div>
                        </div>
-->
                    </div> <span id="preview-card"></span> </div>
                <div class="col-sm-8">
                    <!-- Map -->
                    <div id="mapid"></div>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <!--
                <div class="btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-light sort btn-sm" data-sort="date">
                        <input type="radio" id="search-by-date" autocomplete="off"> <i class="fa fa-calendar" aria-hidden="true"></i> Sort by date </label>
                    <label class="btn btn-light sort btn-sm" data-sort="mins">
                        <input type="radio" id="search-by-length" autocomplete="off"> <i class="fa fa-clock-o" aria-hidden="true"></i> Sort by length </label>
                </div>
-->
                <button class="btn btn-light sort btn-sm" data-sort="date" id="search-by-date"><i class="fa fa-calendar" aria-hidden="true"></i> Sort by date</button>
                <button class="btn btn-light sort btn-sm" data-sort="mins" id="search-by-length"><i class="fa fa-clock-o" aria-hidden="true"></i> Sort by length</button>
            </div>
            <div >
                <ul class="row list list-unstyled" id="myList"> START
                    <li class="col-sm-4"> <span class="badge badge-secondary"><i class="fa fa-insert_media_icon" aria-hidden="true"></i> insert_media_type</span> <span class="badge badge-secondary"><span class="mins">insert_length</span> mins</span> <span class="badge badge-secondary"><span>insert_t_date</span></span> <span class="badge badge-secondary"><span class="taxGroups">insert_taxons</span></span>
                        <div class="card mb-4 box-shadow" id="insert_title">
                            <div class="video-thumb">
                                <a href="insert_media_url" data-lity> <img class="card-img-top img-fluid" src="insert_image_url">
                                    <div class="centered"> <i class="fa fa-insert_media_icon" aria-hidden="true"></i> </div>
                                </a>
                            </div>
                            <div class="card-body">
                                <p hidden class="media">insert_format</p>
                                <p hidden class="date">insert_date</p>
                                <p hidden class="latlong">insert_lat,insert_long,insert_title,insert_creator_name,insert_format,insert_taxons,insert_length,insert_media_url,insert_image_url,insert_creator_id</p>
                                <div class="card-text">
                                    <p class="vid-title" ><b><a href="insert_media_url" data-lity>insert_title</a></b> </p>
                                    <p class='vid-title'><small><b>insert_ser_url (insert_episode_num/insert_num_of_eps)</b> </small></p>
                                    <p class="subtitle"><a href="creators/insert_creator_id.html"><small>insert_creator_name </small></a></p>
                                    <p >insert_description</p>
                                    <p><small>insert_list_species</small></p>
                                </div>
                            </div>
                        </div>
                    </li> END </ul>
            </div>
            <button id="loadMore" type="button" class="btn btn-light btn-block"><i class="fa fa-chevron-down" aria-hidden="true"></i> Show more </button>
            <br>
            <!--<div id="showLess">Show less</div>--></div>
    </main>
    <footer class="text-muted">
        <div class="container">
            <p class="float-right"> <a href="#">Back to top</a> </p>
            <p>A project by <a href="http://simonrolph.me.uk/" target="_blank">Simon Rolph</a>. Code for this site is on my <a href="https://github.com/simonrolph/describewild" target="_blank">Github</a>. Page last updated: insert_update_date.</p>
        </div>
    </footer>
    <!-- jquery -->
    <script src="jquery-3.3.1.min.js"></script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.min.js"></script>
    <!-- lity -->
    <script src="lity-2.3.0/vendor/jquery.js"></script>
    <script src="lity-2.3.0/dist/lity.js"></script>
    <!-- list.js -->
    <script src="list.min.js"></script>
    <!-- lealfet -->
    <script src="leaflet/leaflet.js"></script>
    <script src="Leaflet.markercluster-1.3.0/dist/leaflet.markercluster.js"></script>
    <!-- typeahead -->
    <script src="typeahead.jquery.js"></script>
    <script>
        var substringMatcher = function (strs) {
            return function findMatches(q, cb) {
                var matches, substringRegex;
                matches = [];
                substrRegex = new RegExp(q, 'i');
                $.each(strs, function (i, str) {
                    if (substrRegex.test(str)) {
                        matches.push(str);
                    }
                });
                cb(matches);
            };
        };
        var states = [insert_species_list
        ];
        $('.typeahead').typeahead({
            hint: true
            , highlight: true
            , minLength: 1
        }, {
            name: 'states'
            , source: substringMatcher(states)
        });
    </script>
    <!-- this script filters the js list for what's in the search box when you click the typeahead suggestion -->
    <script>
        $('.tt-menu').click(function () {
            vidFiltering.search($("#search").val());
        });
    </script>
    <script>
        var mymap = L.map('mapid').setView([54.505, -0.09], 5);
        L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.{ext}', {
            attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            , subdomains: 'abcd'
            , minZoom: 0
            , maxZoom: 12
            , ext: 'png'
        }).addTo(mymap);
        var V = new L.DivIcon({
            className: 'my-div-icon'
            , html: '<span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-video-camera fa-stack-1x fa-inverse"></i></span>'
        });
        var P = new L.DivIcon({
            className: 'my-div-icon'
            , html: '<span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-headphones fa-stack-1x fa-inverse"></i></span>'
        });
        var B = new L.DivIcon({
            className: 'my-div-icon'
            , html: '<span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-font fa-stack-1x fa-inverse"></i></span>'
        });
        var markersLayer = new L.markerClusterGroup();

        function updatemap() {
            markersLayer.clearLayers();
            latlongs = $(".latlong");
            latlongs.each(function (index) {
                latlong = $(this).text().split(",");
                marker = new L.Marker([latlong[0], latlong[1]], {
                    icon: eval(latlong[4])
                });
                marker.bindPopup("<a href='"+latlong[7]+"' data-lity><div style='width:200px;'><img class='img-fluid' src='"+ latlong[8]+"'><br><b>" + latlong[2] + "</b></a><br><a href='creators/"+latlong[9]+".html'>By " + latlong[3] + "</a> - "  + latlong[6] + 'mins</div>');
                marker.title = latlong[2];
                markersLayer.addLayer(marker);
            });
            mymap.addLayer(markersLayer);
        };
        updatemap();
    </script>
        <!--
in case i need it later
                marker.on('mouseover', function (e) {
                    this.openPopup();
                });
                marker.on('mouse leave or something', function (e) {
                    this.closePopup();
                });
-->
    <script>
        x = 50;
        size_li = $("#myList li").size();

        function updateloadmore() {
            nvis = vidFiltering.visibleItems.length;
            x = 50;
            $('#myList li').not(':lt(' + x + ')').hide();
            $('#myList li:lt(' + x + ')').show();
            if (nvis <= x) {
                $('#loadMore').hide()
            }
            else {
                $('#loadMore').show()
            }
        };
        $('#loadMore').click(function () {
            x = (x + 50 <= size_li) ? x + 50 : size_li;
            $('#myList li:lt(' + x + ')').show();
            if (nvis <= x) {
                $('#loadMore').hide()
            }
            else {
                $('#loadMore').show()
            }
        });
        $(document).ready(function () {
            updateloadmore()
        });
        var options = {
            valueNames: [
                'card-text'
                , 'taxGroups'
                , 'mins'
                , 'media'
                , 'date'
            ]
        };
        var vidFiltering = new List('vid-filtering', options);
        taxon = "All";
        media = "All";
        $(document).ready(function () {
            $("#fil1, #fil2, #fil3, #fil4, #fil5, #fil6, #fil7, #fil8, #fil9").click(function () {
                taxon = $(this).attr("taxon").toString();
                vidFiltering.filter(function (item) {
                    if ((item.values().taxGroups.includes(taxon) || taxon == "All") && (item.values().media == media || media == "All")) {
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            });
            $("#2fil1, #2fil2, #2fil3, #2fil4").click(function () {
                media = $(this).attr("media").toString();
                vidFiltering.filter(function (item) {
                    if ((item.values().taxGroups.includes(taxon) || taxon == "All") && (item.values().media == media || media == "All")) {
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            });
        });
        vidFiltering.on('updated', updatemap);
        vidFiltering.on('updated', updateloadmore);
    </script>
    <!-- youtube subscribe button javascript (doesn't work if using list.js)    <script src="https://apis.google.com/js/platform.js"></script>-->
</body>

</html>
