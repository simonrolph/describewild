<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="">

    <title>Describe Wild - Homepage</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="typeaheadjs.css">

    <!-- font awesome -->
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.css">

    <!-- lightbox - lity -->
    <link href="lity-2.3.0/dist/lity.css" rel="stylesheet">

    <!-- leaflet css -->
    <link href="leaflet/leaflet.css" rel="stylesheet">
    <link href="Leaflet.markercluster-1.3.0/dist/MarkerCluster.css" rel="stylesheet">
    <link href="Leaflet.markercluster-1.3.0/dist/MarkerCluster.Default.css" rel="stylesheet">

</head>

<body style="">

    <header>
        <div class="navbar navbar-dark bg-dark box-shadow">
            <div class="container d-flex justify-content-between">
                <a href="#" class="navbar-brand d-flex align-items-center">Home
          </a>
            </div>
        </div>
    </header>

    <main role="main">
        <section class="jumbotron text-center">
            <div class="container">
                <h1 class="jumbotron-heading">Describe Wild</h1>
                <p class="lead">Short films, podcasts and blog posts about the natural world and our place in it.</p>
                <!--
                <p>
                    <a href="#" class="btn btn-primary my-2">Add your video</a>
                    <a href="#" class="btn btn-secondary my-2">Read the plan</a>
                </p>
-->
            </div>
        </section>

        <div class="container" id="vid-filtering">

            <!-- Filters -->
            
                    <div class="form-group">
                        <label for="search">Search for keywords</label>
                        <input type="search" class="form-control search" id="search" placeholder="cornish wildflowers, night jars, naturewatch etc.">
                        <br>
                        
                        <label>Filter by taxonomic groups</label>
                        <div class="btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-light active" id="fil1" taxon="All">
                        <input type="radio" name="taxons" autocomplete="off" checked> All
                    </label>
                            <label class="btn btn-light" id="fil2" taxon="Plants">
                        <input type="radio" name="taxons" autocomplete="off" > Plants 
                    </label>
                            <label class="btn btn-light" id="fil3" taxon="Birds">
                        <input type="radio" name="taxons" autocomplete="off" > Birds
                    </label>
                            <label class="btn btn-light" id="fil4" taxon="Mammals">
                        <input type="radio" name="taxons" autocomplete="off" > Mammals 
                    </label>
                            <label class="btn btn-light" id="fil5" taxon="Fish">
                        <input type="radio" name="taxons" autocomplete="off" > Fish 
                    </label>
                            <label class="btn btn-light" id="fil6" taxon="Invertebrates">
                        <input type="radio" name="taxons" autocomplete="off" > Invertebrates 
                    </label>
                            <label class="btn btn-light" id="fil7" taxon="Reptiles">
                        <input type="radio" name="taxons" autocomplete="off" > Reptiles 
                    </label>
                            <label class="btn btn-light" id="fil8" taxon="Amphibians">
                        <input type="radio" name="taxons" autocomplete="off" > Amphibians 
                    </label>
                            <label class="btn btn-light" id="fil9" taxon="Fungi and Lichens">
                        <input type="radio" name="taxons" autocomplete="off" > Fungi and Lichens 
                    </label>
                        </div>
                        
                        <br>
                        <label for="search2">Search by species</label>
                        <input class="typeahead form-control" id="search2" type="text">

                        <br>
                        <label>Filter by format</label>
                        <div class="btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-light active" id="2fil1" media="All">
                        <input type="radio" name="media" autocomplete="off" checked> All
                    </label>
                            <label class="btn btn-light" id="2fil2" media="V">
                        <input type="radio" name="media" autocomplete="off" ><i class="fa fa-video-camera" aria-hidden="true"></i> Videos 
                    </label>
                            <label class="btn btn-light" id="2fil3" media="P">
                        <input type="radio" name="media" autocomplete="off" ><i class="fa fa-headphones" aria-hidden="true"></i> Podcasts
                    </label>
                            <label class="btn btn-light" id="2fil4" media="B">
                        <input type="radio" name="media" autocomplete="off" ><i class="fa fa-font" aria-hidden="true"></i> Blog Posts
                    </label>
                        </div>

                        <br>
                        <div class="btn-group-toggle" data-toggle="buttons">
                            <label class="btn btn-light sort" data-sort="mins">
                        <input type="checkbox" id="search-by-length" autocomplete="off"> <i class="fa fa-clock-o" aria-hidden="true"></i> Sort by length
                    </label>
                        </div>

                    </div>
            
            <hr>
            <div class="row">
                <div class="col-sm-4">
                    <span id="preview-card"></span>
                </div>
                <div class="col-sm-8">
                    <!-- Map -->
                    <div id="mapid"></div>
                </div>
            </div>

            <hr>









            <div class="card-columns">

                <ul class="list list-unstyled">
                    START
                    <li>
                        <div class="card mb-4 box-shadow" id="insert_title">
                            <div class="video-thumb">
                                <a class="vid_link" href="//www.youtube.com/watch?v=insert_video_id" data-lity>
                                        <img class="card-img-top img-fluid" src = "https://i1.ytimg.com/vi/insert_video_id/mqdefault.jpg">
                                        <div class="centered">
                                            <i class="fa fa-play-circle" aria-hidden="true"></i>
                                        </div>                                        
                                </a>

                            </div>



                            <div class="card-body">

                                <p hidden class="media">insert_format</p>

                                <p hidden class="latlong">insert_lat,insert_long,insert_title,insert_creator_name,insert_format,insert_taxons,insert_length</p>

                                <div class="card-text">
                                    <p class="vid-title"><b>insert_title</b> </p>
                                    <p class="subtitle"><small>By insert_creator_name -  <span class="taxGroups">insert_taxons</span> - <span class="mins">insert_length</span> mins</small></p>
                                    <p>insert_description</p>
                                </div>
                            </div>
                        </div>
                    </li>
                    END


                </ul>

            </div>
        </div>
    </main>

    <footer class="text-muted">
        <div class="container">
            <p class="float-right">
                <a href="#">Back to top</a>
            </p>
            <p>A project by <a href="http://simonrolph.me.uk/" target="_blank">Simon Rolph</a>. Code for this website on my <a href="https://github.com/simonrolph/describewild" target="_blank">Github</a>.</p>
        </div>
    </footer>

    <!-- jquery -->
    <script src="jquery-3.3.1.min.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="js/bootstrap.min.js"></script>

    <!-- lity -->
    <script src="lity-2.3.0/vendor/jquery.js"></script>
    <script src="lity-2.3.0/dist/lity.js"></script>

    <!-- list.js -->
    <script src="list.min.js"></script>

    <!-- lealfet -->
    <script src="leaflet/leaflet.js"></script>
    <script src="Leaflet.markercluster-1.3.0/dist/leaflet.markercluster.js"></script>

    <!-- typeahead -->
    <script src="typeahead.jquery.js"></script>

    <script>
        var substringMatcher = function(strs) {
            return function findMatches(q, cb) {
                var matches, substringRegex;

                // an array that will be populated with substring matches
                matches = [];

                // regex used to determine if a string contains the substring `q`
                substrRegex = new RegExp(q, 'i');

                // iterate through the pool of strings and for any string that
                // contains the substring `q`, add it to the `matches` array
                $.each(strs, function(i, str) {
                    if (substrRegex.test(str)) {
                        matches.push(str);
                    }
                });

                cb(matches);
            };
        };

        var states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California',
            'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii',
            'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
            'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
            'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',
            'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota',
            'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island',
            'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont',
            'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'
        ];

        $('.typeahead').typeahead({
            hint: true,
            highlight: true,
            minLength: 1
        }, {
            name: 'states',
            source: substringMatcher(states)
        });
    </script>

    <script>
        var mymap = L.map('mapid').setView([54.505, -0.09], 5);

        L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.{ext}', {
            attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            subdomains: 'abcd',
            minZoom: 0,
            maxZoom: 12,
            ext: 'png'
        }).addTo(mymap);

        var V = new L.DivIcon({
            className: 'my-div-icon',
            html: '<span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-video-camera fa-stack-1x fa-inverse"></i></span>'
        });

        var P = new L.DivIcon({
            className: 'my-div-icon',
            html: '<span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-headphones fa-stack-1x fa-inverse"></i></span>'
        });

        var B = new L.DivIcon({
            className: 'my-div-icon',
            html: '<span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-font fa-stack-1x fa-inverse"></i></span>'
        });

        var markersLayer = new L.markerClusterGroup();

        function updatemap() {
            markersLayer.clearLayers();

            latlongs = $(".latlong");
            latlongs.each(function(index) {
                latlong = $(this).text().split(",");

                marker = new L.Marker([latlong[0], latlong[1]], {
                    icon: eval(latlong[4])
                });

                marker.bindPopup("<b>" + latlong[2] + "</b><br>By " + latlong[3] + " - " + latlong[5] + " - " + latlong[6] + 'mins <br><a href="#' + latlong[2] + '"><button type="button" class="btn btn-light btn-sm">Jump to this</button></a>');

                markersLayer.addLayer(marker);


            });

            mymap.addLayer(markersLayer);
        };

        updatemap();
    </script>



    <script>
        var options = {
            valueNames: [
                'card-text',
                'taxGroups',
                'mins',
                'media'
            ]
        };

        var vidFiltering = new List('vid-filtering', options);

        taxon = "All";
        media = "All";

        $(document).ready(function() {
            $("#fil1, #fil2, #fil3, #fil4, #fil5, #fil6, #fil7, #fil8, #fil9").click(function() {
                taxon = $(this).attr("taxon").toString();

                vidFiltering.filter(function(item) {
                    if ((item.values().taxGroups.includes(taxon) || taxon == "All") && (item.values().media == media || media == "All")) {
                        return true;
                    } else {
                        return false;
                    }
                });
            });
            $("#2fil1, #2fil2, #2fil3, #2fil4").click(function() {
                media = $(this).attr("media").toString();

                vidFiltering.filter(function(item) {
                    if ((item.values().taxGroups.includes(taxon) || taxon == "All") && (item.values().media == media || media == "All")) {
                        return true;
                    } else {
                        return false;
                    }
                });
            });

        });


        vidFiltering.on('updated', updatemap)
    </script>

    <!-- youtube subscribe button javascript (doesn't work if using list.js)    <script src="https://apis.google.com/js/platform.js"></script>-->


</body>

</html>